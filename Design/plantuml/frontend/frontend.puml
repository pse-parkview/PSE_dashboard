@startuml frontend_angular

'maybe wihtout linetype ortho its more readable
'skinparam linetype ortho
skinparam linetype ortho

package ui {
    class AppComponent
    class HeaderComponent
    class SideBarComponent

    package sideBar {
        'inspired by ui
        class SideCurrentChosenCommitComponent
        'inspired by scenario, spawns BenchmarkSelectDialogComponent
        class SideBenchmarkSelectComponent {
            spawnBenchmarkSelectDialog() : void
        }
        'inspired by scenario, spawns BenchmarkCompareDialogComponent
        class SideBenchmarkCompareComponent {
            spawnBenchmarkCompareDialog() : void
        }
        'inspired by scenario
        class SideLoadFromTemplateComponent {
            spawnLoadFromTemplateDialog() : void
        }
        'inspired by mockup
        class SidePreviousPlotsComponent

        'contained within SidePreviousPlotsCopmonent
        class PlotCardComponent

        SidePreviousPlotsComponent "1" *-- "*" PlotCardComponent
    }

    package mainContent {
        'inspired by mockup, purpose or functionality not yet clear
        class AveragePerformanceComponent
        'inspired by mockup
        class GitHistoryComponent
        
        class SingleBenchmarkPlotComponent
        class BenchmarkComparisonPlotComponent
    }

    package plotviews {
        class ScatterPlotComponent
        class LinePlotComponent
        class BarPlotComponent
        class SummaryChartComponent
    }

    package dialogs {
        class PlotConfigurationDialogComponent {
            routeToPlotView()
        }
        class BenchmarkSelectDialogComponent {
            @Input configurePlot: boolean;
            spawnPlotConfigurationDialog()
        }
        class LoadFromTemplateDialogComponent {
            spawnPlotConfigurationDialog()
        }
        class ErrorDialog
        class BenchmarkCompareDialogComponent {
            spawnPlotConfigurationDialog()
        }
    }

    AppComponent "1" *-- "1" HeaderComponent
    AppComponent "1" *-- "1" SideBarComponent

    AppComponent .d.> AveragePerformanceComponent : routes to
    AppComponent .d.> GitHistoryComponent : routes to
    AppComponent .d.> SingleBenchmarkPlotComponent
    AppComponent .d.> BenchmarkComparisonPlotComponent

    SideBarComponent "1" *-- "1" SideCurrentChosenCommitComponent
    SideBarComponent "1" *-- "1" SideBenchmarkSelectComponent
    SideBarComponent "1" *-- "1" SideBenchmarkCompareComponent
    SideBarComponent "1" *-- "1" SideLoadFromTemplateComponent
    SideBarComponent "1" *-- "1" SidePreviousPlotsComponent


    SideBenchmarkSelectComponent .d.> PlotConfigurationDialogComponent : calls
    SideBenchmarkSelectComponent .d.> BenchmarkSelectDialogComponent : calls
    SideBenchmarkCompareComponent .d.> BenchmarkSelectDialogComponent : calls
    SideLoadFromTemplateComponent .d.> LoadFromTemplateDialogComponent : calls

    BenchmarkSelectDialogComponent .u.> PlotConfigurationDialogComponent : calls
    BenchmarkCompareDialogComponent .u.> PlotConfigurationDialogComponent : calls

    PlotConfigurationDialogComponent ...> SingleBenchmarkPlotComponent : routes to
    PlotConfigurationDialogComponent ...> BenchmarkComparisonPlotComponent : routes to

    SingleBenchmarkPlotComponent .d..> ScatterPlotComponent :<<uses>>
    SingleBenchmarkPlotComponent .d..> LinePlotComponent :<<uses>>
    SingleBenchmarkPlotComponent .d..> BarPlotComponent :<<uses>>
    SingleBenchmarkPlotComponent .d..> SummaryChartComponent :<<uses>>

    BenchmarkComparisonPlotComponent .d..> LinePlotComponent :<<uses>>
    BenchmarkComparisonPlotComponent .d..> ScatterPlotComponent :<<uses>>
    
    PlotCardComponent .d..> ScatterPlotComponent :<<uses>>
    PlotCardComponent .d..> LinePlotComponent :<<uses>>
    PlotCardComponent .d..> BarPlotComponent :<<uses>>

}

package datahandler {
    class DataPointService {
        List<Commit> getCommitHistory(branch: String, device: String, benchmark: String)
    }

    class DatapointSelection {
    }

    class DataPoint {
        string commitSha
        string benchmarkId???
    }

    interface Benchmark
    interface MatrixBenchmark

    class ConversionBenchmark
    class SpMVBenchmark
    class SolverBenchmark
    class PreconditionerBenchmark
    class BLASBenchmark

    'besteht aus 2 bench marks
    abstract BenchmarkComparison
    interface Benchmark

    
    Benchmark <|.. MatrixBenchmark : <<extends>>
    MatrixBenchmark <|.. ConversionBenchmark
    MatrixBenchmark <|.. SpMVBenchmark
    MatrixBenchmark <|.. SolverBenchmark
    MatrixBenchmark <|.. PreconditionerBenchmark
    Benchmark <|.. BLASBenchmark


    DatapointSelection "1" o- "*" DataPoint
    ' DatapointSelection --> RestHandler
}

package plotter {

    class PlotService {
        generateScatterPlot(benchmark : ScatterPlottable) :  BubbleChartMultiSeries
        generateLinePlot(benchmark : LinePlottable :  MultiSeries
        generateBarPlot(benchmark : BarPlottable) :  MultiSeries
    }


    interface ScatterPlottable {
        name : String
        getScatterPlotData()
    }

    interface LinePlottable {
        name : String
        getLinePlotData()
    }

    interface BarPlottable {
        name : String
        getBarPlotData()
    }

    interface Summary {
        name : String
        getSummary() : Map<K, V>
        getAmountTested() : int
    }
}


PlotService --> DataPointService
PlotService <-u- ScatterPlotComponent
PlotService <-u- LinePlotComponent
PlotService <-u- BarPlotComponent

@enduml
