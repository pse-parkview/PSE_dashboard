\section{Use Cases}

\begin{figure}[H]
    \includegraphics[width=\textwidth]{usecase.pdf}
    \caption{Use case diagram}
    \label{fig:usecase}
\end{figure}

\case{Plot}{cse:plot}
{initiated by User}
{\gls{configuration} is available}
{\begin{enumerate}
    \item The web app sends a request to the backend containing the \gls{configuration}.
    \item The backend fetches the specified data from a databank.
    \item The backend does the calculations specified in the \gls{configuration} (mean, median, standard deviation).
    \item The backend sends the data back to the web app.
    \item The web app takes the data and generates the plot specified in the \gls{configuration}.
    \item The user gets redirected to a new site where he can inspect the generated plot.
\end{enumerate}}
{The plot specified by the \gls{configuration} gets shown to the User.}
\implementedby{scn:inspect_last_commit}{cse:plot}
\implementedby{scn:comp_benchmarks}{cse:plot}
\implementedby{scn:fetch_data_failure}{cse:plot}

\bigskip

\case{Configure Plot}{cse:config_vis}
{initated by User}
{User selected the \enquote{Create New Plot} option}
{\begin{enumerate}
    \item A popup appears.
    \item The user chooses a plot type.
    \item The user chooses between certain options that are specific to the plot type.
\end{enumerate}}
{A \gls{configuration} gets created.}
\implementedby{scn:inspect_last_commit}{cse:config_vis}
\implementedby{scn:comp_benchmarks}{cse:config_vis}
\implementedby{scn:fetch_data_failure}{cse:config_vis}

\bigskip

\case{Create Plot}{cse:create_plot}
{initated by User}
{benchmark data for commit is available}
{\begin{enumerate}
    \item The user selects a set of commits.
    \item The user initiates the \texttt{Configure Plot} use case by selecting the \enquote{Create New Plot} option.
    \item Once the user is satisfied with his \gls{configuration}, he initiates the \texttt{Plot} use case by selecting the \enquote{Create New Plot} option in the popup.
\end{enumerate}}
{Plot is displayed to the user}
\implementedby{scn:inspect_last_commit}{cse:create_plot}
\implementedby{scn:comp_benchmarks}{cse:create_plot}

\bigskip

\case{Share Plot}{cse:share_vis}
{initiated by User}
{A \gls{plot} has been generated}
{\begin{enumerate}
    \item The user selects the \enquote{Share Plot} option.
    \item A link gets displayed.
    \item The link redirects any visitors to the same \gls{plot}.
\end{enumerate}} 
{A link is shown which redirects to the \gls{plot}}
\implementedby{scn:inspect_last_commit}{cse:share_vis}

\bigskip

\case{Export Plot}{cse:export_vis}
{initiated by User}
{A \gls{plot} has been generated}
{\begin{enumerate}
    \item The user selects the \enquote{Export Plot} option.
    \item A popup appears.
    \item The user chooses a filetype for the export.
    \item The user confirmes and downloads the \gls{plot} in the choosen file format.
\end{enumerate}} 
{The User is offered a download of an export of the \gls{plot}}
\implementedby{scn:comp_benchmarks}{cse:export_vis}

\bigskip

\case{Save Template}{cse:save_template}
{initiated by User, (maybe web browser as well? the cookies get stored on the web browser)}
{The user is in the \texttt{Configure Plot} use case}
{The \texttt{Save Template} use case extends the \texttt{Configure Plot} use case.
\begin{enumerate}
    \item The User selects the \enquote{save template} option.
    \item The User enters a name for the \gls{template}.
    \item The web app stores the template locally (cookies).
\end{enumerate}} 
{\Gls{template} is stored on the locally (might add global templates for later?)}
\implementedby{scn:inspect_last_commit}{cse:save_template}

\bigskip

\case{Use Template}{cse:use_temp}
{initiated by User (maybe web browser as well? the cookies get stored on the web browser)}
{The user is in the \texttt{Configure Plot} use case and a \gls{template} is available locally}
{The \texttt{Use Template} use case extends the \texttt{Configure Plot} use case.
\begin{enumerate}
    \item The User selects the \enquote{use template} option.
    \item User is shown a list of all available \glspl{template}.
    \item User selects a \gls{template} from the list.
    \item The current \gls{configuration} options get set to the values specified in the template.
\end{enumerate}} 
{The \gls{template} is applied to the current configuration.}
\implementedby{scn:comp_benchmarks}{cse:use_temp}

\bigskip

\case{Post Benchmark Results}{cse:post_benchmark_res}
{initiated by External Benchmarking System}
{The external benchmarking system ran the benchmarks}
{\begin{enumerate}
    \item The benchmarking system makes a POST request to the backend containing the new benchmark data in \acrshort{json} format.
    \item The backend converts the received data into the correct format.
    \item The backend stores the received data in a database.
\end{enumerate}} 
{The received performance data is stored in a database}
\implementedby{scn:perf_tracking}{cse:post_benchmark_res}
\implementedby{scn:post_data_failure}{cse:post_benchmark_res}

\bigskip

\case{Performance Tracking}{cse:perf_tracking}
{communicates with External Webservice}
{New benchmark data has been posted to the backend}
{\begin{enumerate}
    \item The backend evaluates the performance of the new benchmark data.
    \item The backend compares the performance of the new benchmark with the performance of the corresponding benchmark of the last commit.
    \item The backend relays the results to a configured number of hooks.
    \item The hooks contact their external webservices according to how they have been configured.
\end{enumerate}}
{The server fires a POST Request to all webhook subscribers}
\implementedby{scn:inspect_last_commit}{cse:perf_tracking}
\implementedby{scn:perf_tracking}{cse:perf_tracking}

\bigskip

\case{Benchmark Results POST Failure}{cse:benchmark_res_post_fail}
{return error code to External Benchmarking System}
{}
{This use case extends the \texttt{Post Benchmark Results} use case if an error occurs.
\begin{enumerate}
    \item The backend identifies the error.
    \item The backend creates a response with the correct error code.
\end{enumerate}}
{}
\implementedby{scn:post_data_failure}{cse:benchmark_res_post_fail}

\bigskip

\case{Benchmark Data Fetching Failure}{cse:benchmark_data_fetch_fail}
{displays error to User}
{This use case extends the \texttt{Plot} use case if an error occurs.}
{\begin{enumerate}
    \item The backend identifies the error.
    \item The backend creates a response with the correct error code.
    \item The web app displays an error message.
\end{enumerate}}
{}
\implementedby{scn:fetch_data_failure}{cse:benchmark_data_fetch_fail}

